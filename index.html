<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ú¯Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ù</title>
<style>
body {
    background-color: #0d0d0d;
    color: white;
    font-family: sans-serif;
    margin: 0;
    padding: 0;
}

/* CP */
.cp-container {
    position: fixed;
    top: 15px;
    left: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 2002; /* Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ */
}

.cp-logo {
    width: 50px;
    height: 50px;
    background-color: #FFD700;
    color: black;
    font-size: 24px;
    font-weight: bold;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.7);
}

.cp-amount {
    font-size: 22px;
    font-weight: bold;
}

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ø§Ù„Ø§ */
.inventory-button {
    position: fixed;
    top: 15px;
    right: 15px;
    background-color: #1a1a1a;
    color: #FFD700;
    border: 2px solid #FFD700;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    font-size: 16px;
    z-index: 2002;
}

.settings-button {
    position: fixed;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #1a1a1a;
    color: #FFD700;
    border: 2px solid #FFD700;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    z-index: 2002;
}

/* Ù…ÙˆØ¯Ø§Ù„ Ø¹Ù…ÙˆÙ…ÛŒ */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: #1a1a1a;
    padding: 20px 30px;
    border-radius: 12px;
    text-align: center;
    color: white;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
    min-width: 260px;
}

.modal-content h3 { margin-top: 0; color: #FFD700; }

.confirm-yes {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 10px 16px;
    margin: 8px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}

.confirm-no {
    background-color: #FF4C4C;
    color: white;
    border: none;
    padding: 10px 16px;
    margin: 8px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}

/* Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ */
.inventory-popup {
    position: fixed;
    top: 80px;
    right: 15px;
    background-color: #1a1a1a;
    padding: 20px;
    border-radius: 15px;
    max-width: 320px;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
    display: none;
    z-index: 2003; /* Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù‡Ù…Ù‡ Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ */
}

.inventory-popup h3 {
    margin: 0 0 10px;
    color: #FFD700;
}

.inventory-popup ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.inventory-popup li {
    margin: 6px 0;
    font-size: 14px;
}

/* ØµÙØ­Ù‡ Ú¯Ø§Ù†â€ŒÙ‡Ø§ */
h1 {
    margin-top: 100px;
    text-align: center;
}

.guns-container, .crates-container {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
    padding: 20px;
}

.gun, .crate {
    background-color: #1a1a1a;
    border-radius: 16px;
    padding: 12px;
    width: 300px;
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.06);
    transition: 0.2s;
}

.gun:hover, .crate:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.6);
}

.gun img, .crate img {
    width: 100%;
    border-radius: 12px;
    display: block;
    min-height: 140px;
    object-fit: cover;
}

.gun h2, .crate h2 {
    margin-top: 12px;
    text-align: center;
}

.buy-button {
    display: block;
    padding: 10px;
    margin: 10px auto 0 auto;
    font-size: 16px;
    background-color: #FFD700;
    color: black;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}

.buy-button:disabled {
    background-color: gray;
    cursor: not-allowed;
}

/* Ú©Ø±ÛŒØª Ø±Ø§ÛŒÚ¯Ø§Ù† */
.crate.free {
    border: 2px solid purple;
    background-color: #4b0082; /* Ù¾Ø´Øª Ø²Ù…ÛŒÙ†Ù‡ Ø¨Ù†ÙØ´ */
    color: white;
}
</style>
</head>
<body>

<div class="cp-container">
    <div class="cp-logo">CP</div>
    <div class="cp-amount">0</div>
</div>

<button class="settings-button" id="openSettings">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
<button class="inventory-button" id="invBtn">Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§</button>

<!-- Ù…ÙˆØ¯Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
<div id="settingsModal" class="modal">
    <div class="modal-content">
        <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h3>
        <div style="display:flex; justify-content:center; gap:8px; flex-wrap:wrap;">
            <button class="confirm-yes" id="settingsDelete">Ø­Ø°Ù Ø§Ú©Ø§Ù†Øª</button>
            <button class="confirm-yes" id="freeCpBtn">CP Ø±Ø§ÛŒÚ¯Ø§Ù† (+0.1)</button>
            <button class="confirm-yes" id="openCrates">Ú©Ø±ÛŒØª</button>
            <button class="confirm-no" id="closeSettings">Ø¨Ø³ØªÙ†</button>
        </div>
    </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø­Ø°Ù Ø§Ú©Ø§Ù†Øª -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <p>Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ú©Ø§Ù†Øª Ø­Ø°Ù Ø´ÙˆØ¯ØŸ</p>
        <div style="display:flex; justify-content:center;">
            <button class="confirm-yes" id="confirmDelete">Ø¨Ù„Ù‡</button>
            <button class="confirm-no" id="cancelDelete">Ø®ÛŒØ±</button>
        </div>
    </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ -->
<div class="inventory-popup" id="inventoryPopup">
    <h3>Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡:</h3>
    <ul id="inventoryList"></ul>
</div>

<h1>Ú¯Ø§Ù†â€ŒÙ‡Ø§ÛŒ Call of Duty Mobile ğŸ¯</h1>

<div class="guns-container" id="gunsContainer">
    <div class="gun">
        <h2>Ø¯ÛŒÙ„ - Ø²ÛŒÙ„Ø§Øª (50 CP)</h2>
        <img src="https://s6.uupload.ir/files/hq720_v85q.jpg" alt="Dill Gun">
        <button class="buy-button" data-name="Ø¯ÛŒÙ„ - Ø²ÛŒÙ„Ø§Øª" data-cost="50">Ø®Ø±ÛŒØ¯</button>
    </div>

    <div class="gun">
        <h2>Ø§Ú†Ø³ - Ù…ÙˆØ²ÛŒÚ©Ø§Ù„ (70 CP)</h2>
        <img src="https://s6.uupload.ir/files/7f4ca79dc7b9da6a930898c5090c21f8_chimage-1-1024x460_q5fa.jpg" alt="HS Legend Gun">
        <button class="buy-button" data-name="Ø§Ú†Ø³ - Ù…ÙˆØ²ÛŒÚ©Ø§Ù„" data-cost="70">Ø®Ø±ÛŒØ¯</button>
    </div>

    <div class="gun">
        <h2>Ú©ÛŒÙ„Ùˆ - Ù…ØªÛŒÚ© (120 CP)</h2>
        <img src="https://s6.uupload.ir/files/62926955-8482-l_1195_rnj6.jpg" alt="Kilo Mythic Gun">
        <button class="buy-button" data-name="Ú©ÛŒÙ„Ùˆ - Ù…ØªÛŒÚ©" data-cost="120">Ø®Ø±ÛŒØ¯</button>
    </div>

    <div class="gun">
        <h2>Ø¯ÛŒÙ„ - Ù…ØªÛŒÚ© (150 CP)</h2>
        <img src="https://s6.uupload.ir/files/63265058-6451-l_2270_0dpp.jpg" alt="Dill Mythic Gun">
        <button class="buy-button" data-name="Ø¯ÛŒÙ„ - Ù…ØªÛŒÚ©" data-cost="150">Ø®Ø±ÛŒØ¯</button>
    </div>

    <div class="gun">
        <h2>Ø§Ø³Ù¾Ú©ØªØ± - Ù…ØªÛŒÚ© (5000 CP)</h2>
        <img src="https://s6.uupload.ir/files/spectre-t3-codm_i1i0.jpg" alt="Spectre Mythic">
        <button class="buy-button" data-name="Ø§Ø³Ù¾Ú©ØªØ± - Ù…ØªÛŒÚ©" data-cost="5000">Ø®Ø±ÛŒØ¯</button>
    </div>

    <div class="gun">
        <h2>Ú¯Ø§Ù†Ø²Ùˆ - Ù„Ø¬Ù†Ø¯ (2000 CP)</h2>
        <img src="https://uploadkon.ir/uploads/42eb06_2539090355-4649-l-6149.jpg" alt="Gunzo Legend">
        <button class="buy-button" data-name="Ú¯Ø§Ù†Ø²Ùˆ - Ù„Ø¬Ù†Ø¯" data-cost="2000">Ø®Ø±ÛŒØ¯</button>
    </div>
</div>

<!-- ØµÙØ­Ù‡ Ú©Ø±ÛŒØªâ€ŒÙ‡Ø§ -->
<div class="crates-container" id="cratesContainer" style="display:none;">
    <div class="crate free">
        <h2>Ù„ÙˆØ§ÙˆØ±Ø¯ - Ø§ØµÙ„ÛŒ (Ø±Ø§ÛŒÚ¯Ø§Ù†)</h2>
        <img src="https://s6.uupload.ir/files/a1ab1a78bc85bb8cd04a5fa51132981d_chimage-1-scaled_2d15.jpg" alt="Levard">
        <button class="buy-button" data-name="Ù„ÙˆØ§ÙˆØ±Ø¯ - Ø§ØµÙ„ÛŒ" data-cost="0">Ø¯Ø±ÛŒØ§ÙØª Ø±Ø§ÛŒÚ¯Ø§Ù†</button>
    </div>
    <!-- Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ú©Ø±ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯ -->
    <button class="confirm-no" id="backFromCrates" style="margin-top:20px;">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>

<script>
let username = localStorage.getItem('username');
let inventory = JSON.parse(localStorage.getItem('inventory')) || [];
let currentCP = localStorage.getItem('cp') ? parseFloat(localStorage.getItem('cp')) : 0;

function renderCP() {
    const el = document.querySelector('.cp-amount');
    if (Number.isInteger(currentCP)) el.textContent = currentCP;
    else el.textContent = currentCP.toFixed(1);
}

function updateInventoryDisplay() {
    const list = document.getElementById('inventoryList');
    list.innerHTML = '';
    inventory.forEach(item => {
        let li = document.createElement('li');
        li.textContent = item;
        list.appendChild(li);
    });
}

function initialize() {
    if (!username) {
        username = prompt("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:");
        if (!username) username = "Ú©Ø§Ø±Ø¨Ø±";
        localStorage.setItem('username', username);

        if (username.trim().toLowerCase() === "Ú†Øª Ø¬ÛŒ Ù¾ÛŒ ØªÛŒ") {
            currentCP = 10000;
            alert("Ù…ÙˆØ¨ÛŒÙ†Ø§ Ø¯Ø§Ø¯Ø§Ø´ Ú†Ø·ÙˆØ±ÛŒ");
        } else {
            currentCP = 0;
            alert(`Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ ${username}! ğŸ®`);
        }

        localStorage.setItem('cp', currentCP);
    } else {
        currentCP = localStorage.getItem('cp') ? parseFloat(localStorage.getItem('cp')) : 0;
    }

    renderCP();
    updateInventoryDisplay();

    document.querySelectorAll('.buy-button').forEach(button => {
        const name = button.getAttribute('data-name');
        if (inventory.includes(name)) button.disabled = true;
    });
}

function buyItemByButton(button) {
    const name = button.getAttribute('data-name');
    const cost = parseFloat(button.getAttribute('data-cost'));
    if (currentCP >= cost) {
        if (!inventory.includes(name)) {
            currentCP -= cost;
            localStorage.setItem('cp', currentCP);
            renderCP();
            inventory.push(name);
            localStorage.setItem('inventory', JSON.stringify(inventory));
            button.disabled = true;
            alert(`${cost===0 ? "Ø¯Ø±ÛŒØ§ÙØª Ø±Ø§ÛŒÚ¯Ø§Ù†" : "Ø®Ø±ÛŒØ¯"} ${name} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ âœ…`);
            updateInventoryDisplay();
        }
    } else {
        alert("CP Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª âŒ");
    }
}

document.addEventListener('click', function(e){
    const btn = e.target.closest('.buy-button');
    if (btn) buyItemByButton(btn);
});

/* Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ */
const settingsModal = document.getElementById('settingsModal');
const deleteModal = document.getElementById('deleteModal');
const inventoryPopup = document.getElementById('inventoryPopup');
const cratesContainer = document.getElementById('cratesContainer');

document.getElementById('openSettings').addEventListener('click', ()=>{settingsModal.style.display='flex';});
document.getElementById('closeSettings').addEventListener('click', ()=>{settingsModal.style.display='none';});
document.getElementById('invBtn').addEventListener('click', ()=>{inventoryPopup.style.display = inventoryPopup.style.display==='block'?'none':'block';});
document.getElementById('settingsDelete').addEventListener('click', ()=>{deleteModal.style.display='flex';});
document.getElementById('confirmDelete').addEventListener('click', ()=>{localStorage.clear(); location.reload();});
document.getElementById('cancelDelete').addEventListener('click', ()=>{deleteModal.style.display='none';});

/* CP Ø±Ø§ÛŒÚ¯Ø§Ù† */
document.getElementById('freeCpBtn').addEventListener('click', function(event){
    if(!event.isTrusted) return;
    currentCP = parseFloat((currentCP + 0.1).toFixed(1));
    localStorage.setItem('cp', currentCP);
    renderCP();
    alert("âœ… 0.1 CP Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯");
});

/* Ú©Ø±ÛŒØªâ€ŒÙ‡Ø§ */
document.getElementById('openCrates').addEventListener('click', ()=>{
    settingsModal.style.display='none';
    document.getElementById('gunsContainer').style.display='none';
    cratesContainer.style.display='flex';
});

document.getElementById('backFromCrates').addEventListener('click', ()=>{
    cratesContainer.style.display='none';
    document.getElementById('gunsContainer').style.display='flex';
});

window.addEventListener('load', initialize);
</script>
</body>
    </html>
